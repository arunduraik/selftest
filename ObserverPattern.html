<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Observer Pattern</title>    
    <script src="./index.js" type="text/script"></script>
  
    <style>
            .squre{
                width: 50px;
                height: 50px;
                line-height: 50px;
                text-align: center;
                display: inline-block;
                margin-right: 10px;
                background-color: black;
                color: white; 
                font-size: 150%;
                font-family: Arial, Helvetica, sans-serif;
            }
            </style>
</head>
<body>
    <h1>Observer Pattern</h1>
    <div class="squre" id="elementObserver1"></div>
    <hr>
    <button type="button">Increment</button>

    <script type="text/script">
        
class NumberModel{
    constructor(){
        this.number = 0;
       this.color = 'red';
       this.observers = []; 
    }

    increment(){
        const colors = ['orange','red','green','blue'];
        this.number ++;
        this.color = colors[Math.floor(Math.random() * colors.length)];
        this.notifyObservers();
    }

    addObserver(o){
        this.observers.push(o);
    }
    notifyObservers(){
        for(let o of this.observers){
            o.update(this);
        }
    }
}



class ElementObserver{
    constructor(elementId){
        this.element = document.getElementById(elementId);
    }

    update(model){
        this.element.innerHTML  = model.number;
        this.element.style.backgroundColor = model.color;
    }
}

        const model = new NumberModel();
        const eObs1 = new ElementObserver('elementObserver1');
    </script> 

</body>
</html>